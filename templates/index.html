<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skill CAMPUS in 盛岡</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
</head>

<body>
    <div class="container">
        <header class="header">
            <img src="{{ url_for('static', filename='images/icon.png') }}" alt="Logo" class="logo">
            <h1>Skill CAMPUS in 盛岡</h1>
        </header>

        <main class="main-content">
            <section class="info-section" style="text-align:center; width: 250px;">
                <br>
                <h2>ようこそ、Skill CAMPUS in 盛岡へ！</h2>
                <p>当サイトは、岩手県盛岡市内を巨大キャンパスとして</p>
                <p>さまざまなスキル合宿エリアを提供しています</p>
                <br>
                <p>合宿規模を入力して表示される合宿場所をクリック</p>
                <p>近隣の関連施設とともに情報が表示されますので</p>
                <p>いい場所が見つかりましたらお問い合わせください</p>
                <br>
                <br>
                <div class="input-group" style="text-align:center;">
                    <label for="capacity">Capacity</label>
                    <select id="capacity" name="capacity" style="width:200px;">
                        <option value="">人数</option>
                        <option value="10">20人</option>
                        <option value="50">50人</option>
                        <option value="100">100人</option>
                    </select>
                </div>

                <button class="contact-button">いますぐ問い合わせる</button>
            </section>

            <section class="map-section" style="flex-grow: 1;">
                <div id="map" style="height: 100%; width: 100%;"></div>
                <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
                <script>
                    var map = L.map('map').setView([39.7036, 141.1527], 14);  // 盛岡市の座標

                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                    }).addTo(map);

                    // サーバーからマーカー情報を取得
                    fetch('/markers')
                        .then(response => response.json())
                        .then(data => {
                            data.forEach(marker => {
                                L.marker([marker.lat, marker.lng]).addTo(map)
                                    .bindPopup(marker.name);
                            });
                        });
                </script>
            </section>
        </main>

        <section class="details-section">
            <!-- 学校情報 -->
            <div class="facility-info">
                <h3>学校</h3>
                {% for school in school %}
                    <p>{{ school.name }} (座標: {{ school.lat }}, {{ school.lng }})</p>
                {% endfor %}
            </div>

            <!-- 宿泊施設情報 -->
            <div class="facility-info">
                <h3>宿泊施設</h3>
                {% for hotel in hotel %}
                    <p>{{ hotel.name }} (座標: {{ hotel.lat }}, {{ hotel.lng }})</p>
                {% endfor %}
            </div>

            <!-- 飲食店情報 -->
            <div class="facility-info">
                <h3>飲食店</h3>
                {% for food in food %}
                    <p>{{ food.name }} (座標: {{ food.lat }}, {{ food.lng }})</p>
                {% endfor %}
            </div>
        </section>

        <footer class="footer">
            Copyright © 2024 SkillCAMPUS in 盛岡
        </footer>
    </div>
</body>

</html>
